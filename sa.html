<!DOCTYPE html>
<html> 
 <head>
    <title>Processing.JS inside Webpages: Template</title> 
     <style>
         body{

     background-size: cover;
    
         }
     </style>
</head>
 <body background="gm2.jpg">
    <p align="center"> 
	<!--This draws the Canvas on the webpage -->
      <canvas id="mycanvas">
        
        </canvas> 
    </p>
 </body>
 
 <!-- Run all the JavaScript stuff -->
 <!-- Include the processing.js library -->
 <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script> 
 
 <script>
     var f=true;
     var stun=true;
     var cla=0;
     var da=true;
     var c;
     var a;
     var m;
     var s=true;
    var v=true;
    var sketchProc = function(processingInstance) {
     with (processingInstance) {
       var z; 
        size(1000, 900); 
var audio = new Audio('sound.wav');
 var audio1=new Audio('click.wav');       
var audio2=new Audio('boing.wav');  
var audio3=new Audio('frez.wav'); 
var audio4=new Audio('goal.mp4');          
      var cur=0;
     var p1b=0;
     var p2b=0;     
   var speed1=0;
         
/*THE TRICK FOR SMOOTH MOVEMENT*/         
         var keys={};
onkeydown=function(e){
    keys[event.which]=true;
    
  
}
 onkeyup=function(e){
     keys[event.which];
     delete keys[event.which];
    
 }
         
         
       
 var speed=2;  
/*Constructor twn player*/         
var con = function(x,y,w,h){
    this.x=x;
    this.y=y;
    this.w=w;
    this.h=h;
    
    
}
/*DRAW FOR THE PLAYERS*/
con.prototype.drawAg=function(){
    rect(this.x,this.y,this.h,this.w);
    
    
}
/*DRAW FOR THE BALL*/
con.prototype.drawA=function(){
    fill(200,100,100);
    ellipse(this.x,this.y,this.h,this.w);
    
    
}
/*MOVEMENT OF PLAYER ONW*/
con.prototype.movV=function(){

     if(keys[87]){
   p1.y-=2;
   
}
  if(keys[65]){
      p1.x-=2;
      
  }
  if(keys[68]){
     p1.x+=2;
     loop();
  }
  if(keys[83]){
      p1.y+=2;
  }
     if(p1.y<0){
       p1.y=0;
   } 
     if(p1.x<0){
       p1.x=0;
   } 
         if(p1.y>800){
       p1.y=800;
   } 
}
/*MOVEMENT OF PLAYER TWO*/
con.prototype.movV1=function(){
     if(keys[73]){
    la.y-=2;
}
  if(keys[74]){
      la.x-=2;
      
  }
  if(keys[76]){
     la.x+=2;
     loop();
  }
  if(keys[75]){
      la.y+=2;
  }
    
   if(la.y<0){
       la.y=0;
   } 
       if(la.x>970){
       la.x=970;
   } 
           if(la.y>800){
       la.y=800;
   } 
    freeze();
}



/*PHYSICS OF THE GAME COLLISION*/
var collide=function(){
  if(ball.x-p1.x<50 && ball.x-p1.x>40 && ball.y-p1.y>25 && ball.y-p1.y<70){
     speed=3;
      speed1=0;
             audio2.play();
  }
     if(ball.x-p1.x<50 && ball.x-p1.x>40 && ball.y-p1.y>=70 && ball.y-p1.y<90){
      speed1=2;
      speed=3;
                audio2.play();
  }
    if(ball.x-p1.x<50 && ball.x-p1.x>40 && ball.y-p1.y<=100 && ball.y-p1.y>=90)
        {
            speed=3;
            speed1=1.5;
                   audio2.play();
        }
     if(ball.x-p1.x<50 && ball.x-p1.x>40 && ball.y-p1.y<=111 && ball.y-p1.y>=101)
        {
            speed=3;
            speed1=1.7;
                   audio2.play();
        }
      if(ball.x-p1.x<50 && ball.x-p1.x>40 && ball.y-p1.y<=125 && ball.y-p1.y>=112)
        {
            speed=3;
            speed1=2;
                   audio2.play();
        }
     if(la.x-ball.x<25 && la.x-ball.x>10 && ball.y-la.y>25 && ball.y-la.y<70){
         speed=-3;
         speed1=0;
                audio2.play();
     }
     if(la.x-ball.x<25 && la.x-ball.x>10 && ball.y-la.y>=70 && ball.y-la.y<90){
      speed1=1;
      speed=-3;
                audio2.play();
  }
    if(ball.x-p1.x<50 && ball.x-p1.x>40 && ball.y-p1.y>=10 && ball.y-p1.y<30){
      speed1=-0.5;
      speed=3;
               audio2.play();
  }
      if(ball.x-p1.x<50 && ball.x-p1.x>40 && ball.y-p1.y>=-10 && ball.y-p1.y<10){
      speed1=-0.7;
      speed=3;
              audio2.play();
  }
       if(ball.x-p1.x<50 && ball.x-p1.x>40 && ball.y-p1.y>=-20 && ball.y-p1.y<-10){
      speed1=-0.7;
      speed=3;
                  audio2.play();
  }
       if(ball.x-p1.x<50 && ball.x-p1.x>40 && ball.y-p1.y>=-25 && ball.y-p1.y<-20){
      speed1=-0.9;
      speed=3;
                  audio2.play();
  }
    if(la.x-ball.x<25 && la.x-ball.x>10 && ball.y-la.y<=100 && ball.y-la.y>=90)
        {
            speed=-3;
            speed1=1.5;
                   audio2.play();
        }
     if(la.x-ball.x<25 && la.x-ball.x>10 && ball.y-la.y<=111 && ball.y-la.y>=101)
        {
            speed=-3;
            speed1==1.7;
                   audio2.play();
        }
      if(la.x-ball.x<25 && la.x-ball.x>10 && ball.y-la.y<=125 && ball.y-la.y>=112)
        {
            speed=-3;
            speed1=2;
                   audio2.play();
        }
        if(la.x-ball.x<25 && la.x-ball.x>10 && ball.y-la.y>=10 && ball.y-la.y<30){
      speed1=-0.5;
      speed=-3;
                   audio2.play();
  }
      if(la.x-ball.x<25 && la.x-ball.x>10 && ball.y-la.y>=-10 && ball.y-la.y<10){
      speed1=-0.7;
      speed=-3;
                 audio2.play();
  }
       if(la.x-ball.x<25 && la.x-ball.x>10 && ball.y-la.y>=-20 && ball.y-la.y<-10){
      speed1=-0.7;
      speed=-3;
                  audio2.play();
  }
       if(la.x-ball.x<25 && la.x-ball.x>10 && ball.y-la.y>=-25 && ball.y-la.y<-20){
      speed1=-0.9;
      speed=-3;
                  audio2.play();
  }  
    if(ball.y<20){
        speed1=1;
               
    }
    if(ball.y>880){
        speed1=-1;
        
    }
  
   
}
    
 /* SCENE ONE MAIN */
  var scene1=function(){
       
           background(255,0,0);
            textSize(30);
            fill(0,0,0);
              text(p1b,20,30);
              text(p2b,900,30);
     
            p1.drawAg();
            
            la.drawAg();
            ball.drawA();
       
              
            if(stun==true){
           p1.movV();
            }
           la.movV1();
           
            
            
            ball.x=ball.x+speed;
            ball.y=ball.y+speed1;
            collide();
            
  }  
/* PLAY ONE TIME AUDIO IN BUTTONS */
var  onetime=function(){
  if(mouseX>420 && mouseX<580 && mouseY>200 && mouseY<250 && v==true){
                audio.play();
         v=false;
      console.log("Prwto");
  }
    if(mouseX<410 || mouseX>590 || (mouseY>250 && mouseY<260)
      || (mouseY>310 && mouseY<320) || (mouseY<200 || mouseY>370)){
          
            v=true;
            s=true;
            f=true;
        console.log("apeiro");
       }
    if(mouseX>420 && mouseX<580 && mouseY>260 && mouseY<310 && s==true){
         audio.play();
         s=false;
        console.log("deutero");
  }
       if(mouseX>420 && mouseX<580 && mouseY>320 && mouseY<370 && f==true){
         audio.play();
         f=false;
            console.log("trito");
  }
}
  /* START SCENE MENU */
  var scene=function(){
      background(200,100,100);
      fill(255,255,255);
    onetime();
      if(mouseX>420 && mouseX<580 && mouseY>200 && mouseY<250){
          fill(224,224,224);
     
           
          }
  
     button1.drawAg();
      fill(255,255,255);
    if(mouseX>420 && mouseX<580 && mouseY>260 && mouseY<310){
          fill(224,224,224);

    
          
          
      }
  button2.drawAg();
      fill(255,255,255);
      if(mouseX>420 && mouseX<580 && mouseY>320 && mouseY<370){
            fill(224,224,224);
          
      }
  button3.drawAg();  
       fill(0,0,0);
      textSize(25);
      text("START",470,235);
      text("OPTIONS",450,295);
        textSize(25);
      textFont("arial",25);
      text("CONTROLS",435,355);
  
mouseClicked=function(){
    if(mouseX>420 && mouseX<620 && mouseY>200 && mouseY<250){
           cur=1;
        scene1();
        audio1.play();
        
    }
     if(mouseX>420 && mouseX<620 && mouseY>310 && mouseY<370){
           cur=3;
       
        audio1.play();
        
    }
    if(mouseX>15 && mouseX<165 && mouseY<880 && mouseY>820){
        cur=0;
        scene();
        audio1.play();
    }
}
}


  
  /* CREATION OF THINGS */
var button1=new con(430,200,50,150);
var button2=new con(430,260,50,150); 
var button3=new con(430,320,50,150); 
var button4=new con(15,830,50,150);           
var p1=new con(30,80,100,30);
var ball=new con(500,80,50,50);  
var la=new con(800,80,100,30);   
 var freezer=new con(800,80,20,20);
         
       
     var w=0;
    
         
         
         /*SKILL PLAYER ONE*/
        var fast=function(){
            if(keys[71] && ball.x-p1.x>15 && ball.x-p1.x<50){
                speed=5;
            
                console.log("sakis")
            }
        }
        
        
        /*SKILL PlAYER TWO*/
            var freeze=function(){
                  
                 
               if(keys[72] && da==true ){
                    a=la.y;
                   freezer.y=a;
                   m=la.x;
                   freezer.x=m;
                  c=1;
                   
             
            
         
         }
                if(c==1){
                    da=false;
                }
                if(c==0){
                    da=true;
                }
     }
            
            
            
            
           if( z===1){
               audio.play();
               console.log("sa");
               z=0;
           }
         
         
         
         
/* WIN STATE*/
         var win=function(){
            if(p2b==5 || p1b==5){
                cur=2;
            }
            
         }
         
    /* WINNER SCENE */
             var scene2=function(){
                if(p1b==5){
                    background(100,50,200);
                    textSize(60);
                    text("Winner player 1",290,60);
                }else if(p2b==5){
                      background(100,50,200);
                    textSize(60);
                    text("Winner player 2",290,60);
                } 
             }
             /*PRESSED KEY */
       onkeypress=function(){
           freeze();
       }  
       /*SCENE 3 BUTTONS */ 
  var scene3=function(){
      background(100,50,200); 
      fill(204,204,0);
      textSize(30);
      text("Player one:",10,50);
      textSize(20);
      text("g button blow a wind make the ball faster",10,100);
      text("player move with w,s,a,d",10,200);
       textSize(30);
          fill(0,153,0);
      text("Player two:",550,50);
      textSize(20);
      text("h button throw an ice cube that stun the enemy ",550,100);
       text("player move with i,k,j,l",550,200);
      
      textSize(30);
          fill(255,0,0)
          if(mouseX>15 && mouseX<165 && mouseY<880 && mouseY>820){
              fill(255,102,102);
          }
      button4.drawAg();
       fill(0,0,0);
        text("MENU",50,865);
   
  }
         
 /* HERE IT RUNS THE DRAW FUNCTION*/        
         
        draw=function(){
            console.log(freezer.y,p1.y);
            if(cur==0){
               scene(); 
             
            }
           
            fast();
          
        if(cur==1){
            scene1();
              
             win();
            /*DROP ICE CUBE*/
            if(c==1){
               
                 fill(165, 242, 243);
                   freezer.drawAg();
                freezer.x-=5;
                if(freezer.x-p1.x<20 && freezer.x-p1.x>0&&freezer.y-p1.y>-18 && freezer.y-p1.y<98 ){
                    freezer.x=la.x;
                    freezer.y=la.y;
                    c=0;
                    
                    
        /*STUN MOMEMENT*/    
                    stun=false;
                    audio3.play();
                 
                }
                if(freezer.x<-30){
                     freezer.x=la.x;
                    freezer.y=la.y;
                    c=0;
                }
                
                }

           
        }
              if(stun==false){
                    cla-=1;
                    if(cla==-160){
                        stun=true;
                        cla=0;
                    }
               
        } /*STUN MOMENT*/
             if(cur==3){
                scene3();
            }
            
            if(cur==2){
                scene2();
            }
          
     /*SCORE GOAL THING FOR PLAYER 2*/      
        if(ball.x<-35){
      
         audio4.play();  
       p2b+=1;
        
      ball.x=500;
      ball.y=80;
      speed1=0;
      p1.x=30;
      p1.y=80;    
         la.x=800;
        la.y=80;     
   }
            /*SCORE GOAL THING FOR PLAYER 1*/
    if(ball.x>1050){
      audio4.play();  
        p1b+=1;
        ball.x=500;
      ball.y=80;
      speed1=0;
        la.x=800;
        la.y=80;
         p1.x=30;
      p1.y=80;    
    }
            
        
    }
     }
    }

    // Get the canvas that Processing-js will use
    var canvas = document.getElementById("mycanvas"); 
    var processingInstance = new Processing(canvas, sketchProc);
 </script>

</html>